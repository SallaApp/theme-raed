(()=>{"use strict";function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(n,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,(c=r.key,i=void 0,i=function(n,e){if("object"!==t(n)||null===n)return n;var o=n[Symbol.toPrimitive];if(void 0!==o){var r=o.call(n,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(c),"symbol"===t(i)?i:String(i)),r)}var c,i}function e(t,n){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},e(t,n)}function o(n,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function i(t,n,o){return i=c()?Reflect.construct.bind():function(t,n,o){var r=[null];r.push.apply(r,n);var c=new(Function.bind.apply(t,r));return o&&e(c,o.prototype),c},i.apply(null,arguments)}function u(t){var n="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||(o=t,-1===Function.toString.call(o).indexOf("[native code]")))return t;var o;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,c)}function c(){return i(t,arguments,r(this).constructor)}return c.prototype=Object.create(t.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),e(c,t)},u(t)}var l=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&e(t,n)}(s,t);var c,i,u,l,a=(u=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=r(u);if(l){var e=r(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return o(this,t)});function s(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this)).displayAllText=null,t.menus=[],t}return c=s,(i=[{key:"connectedCallback",value:function(){var t=this;salla.onReady((function(){salla.api.component.getMenus("header").then((function(n){var e=n.data;t.menus=e,t.displayAllText=salla.lang.get("blocks.home.display_all"),t.render()})).catch((function(t){console.error("Error fetching menus:",t)}))}))}},{key:"hasChildren",value:function(t){return t&&t.children&&t.children.length>0}},{key:"hasProducts",value:function(t){return t&&t.products&&t.products.length>0}},{key:"clx",value:function(t){return t}},{key:"getDesktopClasses",value:function(t,n){return this.clx("!hidden lg:!block ".concat(n?"root-level lg:!inline-block":"relative"," ").concat(t.products?" mega-menu":"","\n        ").concat(this.hasChildren(t)?" has-children":""))}},{key:"getMobileMenu",value:function(t,n){var e=this,o=t.image?'<img src="'.concat(t.image,'" class="rounded-full" width="48" height="48" alt="').concat(t.title,'" />'):"";return'\n        <li class="lg:hidden text-sm font-bold">\n            '.concat(this.hasChildren(t)?'\n                <span class="'.concat(this.clx(t.image?"!py-3":""),'">\n                    ').concat(o,"\n                    ").concat(t.title,'\n                </span>\n                <ul>\n                    <li class="text-sm font-bold">\n                        <a href="').concat(t.url,'" class="text-gray-500">').concat(n,"</a>\n                    </li>\n                    ").concat(t.children.map((function(t){return e.getMobileMenu(t,n)})).join(""),"\n                </ul>\n            "):'\n                <a href="'.concat(t.url,'" aria-label="').concat(t.title||"category",'" class="').concat(this.clx("text-gray-500 ".concat(t.image?"!py-3":"")),'">\n                    ').concat(o,"\n                    <span>").concat(t.title||"","</span>\n                </a>"),"\n        </li>")}},{key:"getDesktopMenu",value:function(t,n){var e=this;return'\n        <li class="'.concat(this.getDesktopClasses(t,n),'">\n            <a href="').concat(t.url,'" aria-label="').concat(t.title||"category",'">\n                <span>').concat(t.title||"","</span>\n            </a>\n            ").concat(this.hasChildren(t)?'\n                <div class="'.concat(this.clx("sub-menu ".concat(this.hasProducts(t)?"w-full left-0 flex":"w-56")),'">\n                    <ul class="').concat(this.clx(this.hasProducts(t)?"w-56 shrink-0 m-8 rtl:ml-0 ltr:mr-0":""),'">\n                        ').concat(t.children.map((function(t){return e.getDesktopMenu(t,!1)})).join(""),"\n                    </ul>\n                    ").concat(this.hasProducts(t)?'\n                        <div class="s-menu-products-wrapper">\n                            <salla-products-list\n                                source="selected"\n                                shadow-on-hover\n                                source-value="'.concat(t.products.map((function(t){return t.id})).join(","),'"\n                            />\n                        </div>'):"","\n                </div>"):"","\n        </li>")}},{key:"getMenus",value:function(t){var n=this;return t.map((function(t){return"\n            ".concat(n.getMobileMenu(t,n.displayAllText),"\n            ").concat(n.getDesktopMenu(t,!0),"\n        ")})).join("")}},{key:"getHeaderMenu",value:function(t){return'\n        <nav id="mobile-menu" class="mobile-menu">\n            <ul class="main-menu">\n                '.concat(this.getMenus(t),'\n            </ul>\n            <button class="btn--close close-mobile-menu sicon-cancel lg:hidden"></button>\n        </nav>\n        <button class="btn--close-sm close-mobile-menu sicon-cancel hidden"></button>')}},{key:"render",value:function(){this.innerHTML=this.getHeaderMenu(this.menus)}}])&&n(c.prototype,i),Object.defineProperty(c,"prototype",{writable:!1}),s}(u(HTMLElement));customElements.define("custom-main-menu",l)})();