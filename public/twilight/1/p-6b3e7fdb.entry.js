/*!
 * Crafted with â¤ by Salla
 */
import{r as s,h as e,g as t}from"./p-e72c32ba.js";const i='.s-offer-wrapper .s-slider-block__title h2{font-size:1.125rem;line-height:1.75rem;color:#f87171}.s-offer-wrapper .s-slider-block__title h2::before{font-family:"sallaicons";content:"\\ee30" !important;position:absolute;top:1rem;font-size:3rem;font-weight:400;line-height:1;color:#fef2f2}.s-offer-bank-wrapper-sinlge-item{display:-ms-flexbox;display:flex;-ms-flex-align:center !important;align-items:center !important;gap:14px}.s-offer-bank-wrapper{display:-ms-flexbox !important;display:flex !important;width:100% !important}';const a=class{constructor(e){s(this,e);var t;this.productId=undefined;this.offer=undefined;this.offersList=[];this.userCurrency=undefined;this.isMultipleBank=undefined;this.title=undefined;this.offer_with_price_text=salla.lang.get("pages.offer.with_price",{price:""});this.with_discount_text=salla.lang.get("pages.products.with_a_discount");this.product_discount_text=salla.lang.get("pages.products.discount");this.special_offer_text=salla.lang.get("pages.products.special_offer");this.buy_quantity_text=s=>salla.lang.get("pages.offer.buy_quantity",{quantity:s});salla.lang.onLoaded((()=>{this.offer_with_price_text=salla.lang.get("pages.offer.with_price");this.with_discount_text=salla.lang.get("pages.products.with_a_discount");this.product_discount_text=salla.lang.get("pages.products.discount");this.special_offer_text=salla.lang.get("pages.products.special_offer");this.buy_quantity_text("")}));salla.onReady((()=>{this.productId=this.productId||(salla.url.is_page("product.single")?salla.config.get("page.id"):null);this.userCurrency=salla.config.get("user.currency")}));this.categorySlot=((t=this.host.querySelector('[slot="category"]'))===null||t===void 0?void 0:t.innerHTML)||'<a href={url} class="s-offer-slide-cat-entry"><i class={icon}></i><h4>{name}</h4></a>'}getCategoriesSection(s){return s.map((s=>e("div",{class:"s-offer-slide-one-sixth swiper-slide",innerHTML:this.categorySlot.replace(/\{url\}/g,s.url).replace(/\{icon\}/g,s.icon).replace(/\{name\}/g,s.name)})))}getProductSection(s){return s.map((s=>e("div",{class:"s-offer-slide-one-fourth"},e("salla-product-card",{"shadow-on-hover":true,product:s}))))}getBankSection(s,t,i){return s.map((s=>e("div",{class:{"s-offer-slide-one-sixth":this.isMultipleBank,"s-offer-bank-wrapper-sinlge-item":!this.isMultipleBank}},e("div",{class:{"s-offer-bank-wrapper":true,"s-offer-slide-one-sixth":!this.isMultipleBank,"s-offer-bank-wrapper-multi-spacer":this.isMultipleBank}},e("div",{class:"s-offer-bank-logo"},e("img",{src:s.logo||salla.url.cdn("images/s-empty.png"),"data-src":s.logo,alt:s.name+" offer"})),e("ul",{class:"s-offer-bank-payment-wrapper"},s.payments.map((s=>e("li",{class:"s-offer-bank-payment-single"},e("img",{src:salla.url.cdn("images/payment/"+s+"_mini.png")||salla.url.cdn("images/s-empty.png"),"data-src":salla.url.cdn("images/payment/"+s+"_mini.png"),alt:"payment"}))))),this.isMultipleBank?e("p",{class:"s-offer-bank-payment-discount-percent"},this.product_discount_text+s.percent,"%"):""),!this.isMultipleBank?e("div",{class:"s-offer-bank-message s-offer-slide-one-fourth"},e("h2",null,t),e("p",null,i)):"")))}getDiscountTableSection(s){return s.map((s=>{var t;return e("div",{class:"s-offer-slide-one-fourth"},e("div",{class:"s-offer-slide-offer-entry"},e("div",{class:"s-offer-slide-offer-entry-price-quantity-container"},e("p",{class:"s-offer-slide-offer-entry-quantity"},this.buy_quantity_text(s.quantity_text)),s.show_discounted_price?e("div",{class:"s-offer-slide-offer-entry-price"},e("span",null,this.offer_with_price_text),e("span",{class:"s-offer-slide-offer-entry-price-amount"},salla.helpers.money(s.price))," ",(t=this.userCurrency)===null||t===void 0?void 0:t.symbol):""),e("p",{class:"s-offer-slide-offer-entry-price-amount-percent"},this.with_discount_text,"(",e("span",null,s.percent),")")))}))}render(){if(!this.productId){salla.logger.error("salla-offer::Can't render the component without product-id!");return}if(!this.offersList.length)return null;const s=this.offersList[0];this.isMultipleBank=!!s&&!!s.get.banks&&s.get.banks.length>1;return e("div",{class:"s-offer-wrapper"},e("p",{class:"s-offer-corner-badge"},this.special_offer_text),e("salla-slider",{type:"carousel","block-title":this.isMultipleBank?s.name:null,"block-subTitle":this.isMultipleBank?s.message:null,id:"offer-slider"},e("div",{slot:"items"},[!!s.get.categories?this.getCategoriesSection(s.get.categories):!!s.get.products?this.getProductSection(s.get.products):!!s.get.banks?this.getBankSection(s.get.banks,s.name,s.message):"",!!s.get.discounts_table?this.getDiscountTableSection(s.get.discounts_table):""])))}componentWillLoad(){return this.productId?salla.api.product.offers(this.productId).then((s=>this.offersList=s.data)):null}get host(){return t(this)}};a.style=i;export{a as salla_offer};
//# sourceMappingURL=p-6b3e7fdb.entry.js.map