/*! For license information please see 438.js.LICENSE.txt */
"use strict";(self.webpackChunktheme_raed=self.webpackChunktheme_raed||[]).push([[438],{4901:(t,e,s)=>{s.d(e,{H:()=>l}),salla.event.setMaxListeners(20);class n extends salla.AppHelpers{setHost(t){this.host=t}getElement(t){return this.host.querySelector(t)}getAttribute(t,e){var s;return null===(s=this.getElement(t))||void 0===s?void 0:s.getAttribute(e)}val(t){return this.getAttribute(t,"value")}isUser(){return"user"===salla.config.get("user.type")}}const l=new n},2438:(t,e,s)=>{s.r(e),s.d(e,{salla_infinite_scroll:()=>i});var n=s(6298),l=s(4901);const i=class{constructor(t){(0,n.r)(this,t),this.nextPage="",this.autoload=!1,this.container="salla-infinite-scroll",this.item="salla-infinite-scroll > *",l.H.setHost(this.host),this.status=document.createElement("div"),this.status.className="s-infinite-scroll-wrapper",this.status.innerHTML=`<div class="s-infinite-scroll-status" style="display:none">\n        <p class="s-infinite-scroll-last infinite-scroll-last"></p>\n        <p class="s-infinite-scroll-error infinite-scroll-error"></p>\n      </div>\n      <a href="${this.nextPage}" class="s-infinite-scroll-btn s-button-btn s-button-primary">\n        <span class="s-button-text s-infinite-scroll-btn-text">${salla.lang.get("common.elements.load_more")}</span>\n        <span class="s-button-loader s-button-loader-center s-infinite-scroll-btn-loader" style="display: none"></span>\n      </a>`,this.btnLoader=this.status.querySelector(".s-button-loader"),salla.lang.onLoaded((()=>{this.status.querySelector(".s-button-text").innerHTML=salla.lang.get("common.elements.load_more"),this.status.querySelector(".s-infinite-scroll-last").innerHTML=salla.lang.get("common.elements.end_of_content"),this.status.querySelector(".s-infinite-scroll-error").innerHTML=salla.lang.get("common.elements.failed_to_load_more")}))}loading(t=!0){let e=this.status.querySelector(".s-button-text");l.H.toggleElementClassIf(e,"s-button-hide","s-button-show",(()=>t)),this.btnLoader.style.display=t?"inherit":"none"}render(){return this.nextPage.length>1?(0,n.h)(n.H,{class:"s-infinite-scroll-container"},(0,n.h)("slot",null)):""}componentDidLoad(){if(0===this.nextPage.length)return;this.host.insertAdjacentElement("afterend",this.status);let t=this,e=salla.infiniteScroll.initiate(this.container,{history:!!this.autoload&&"push",scrollThreshold:!!this.autoload&&400,nextPage:this.nextPage,checkLastPage:'salla-infinite-scroll[next-page*=":"],salla-infinite-scroll[next-page*="."]',status:".s-infinite-scroll-status",button:this.status.querySelector(".s-button-btn"),append:this.item,path:function(){return t.nextPage.replace(/page\=(\d)/g,"page="+(this.loadCount+2))}}).on("request",(()=>this.loading())).on("load",(()=>{this.loading(!1),2==e.pageIndex&&e.option({loadOnScroll:!1}),3==e.pageIndex&&e.option({loadOnScroll:!0})})).on("error",(()=>this.loading(!1)))}get host(){return(0,n.g)(this)}};i.style=""}}]);