{% for item in items %}
    <div data-order-item-id="{{ item.id }}" data-order-item-product-id="{{ item.product.id }}" class="order-item bg-white p-5 border-b border-gray-100 first:rounded-t-md last:rounded-b-md last:border-none">

        {% if item.product %}
            <div class="flex space-s-5 mb-4">
                <a href="{{ item.product.url }}" class="shrink-0">
                    <img src="{{ item.image ?: 'images/placeholder.png' | asset }}"
                         alt="{{ item.name }}"
                         class="w-18 h-14 object-{{ item.image ? 'cover':'contain' }} rounded-md">
                </a>
                <div>
                    <a href="{{ item.product.url }}"
                       class="block leading-5 mb-1.5 md:text-base font-semibold transition-colors text-gray-500 hover:text-primary">
                        {{ item.name }}
                    </a>
                    <b>{{ item.price|money }}</b>
                </div>
            </div>
        {% else %}
            <div class="w-full  flex  justify-between text-sm py-2.5">
                <span class="w-40 inline-block font-normal">{{ item.name }}</span>
                <b>{{ item.price|money }}</b>
            </div>
        {% endif %}

        <div class="w-full flex justify-between text-sm py-2.5">
            <span class="w-40 inline-block font-normal">{{ trans('pages.products.quantity') }}</span>
            <b>
                {% if  branch is not empty %}
                    {{ item.stock_quantity }}
                {% else %}
                    {{ item.quantity }}
                {% endif %}
            </b>
        </div>
        <div class="flex justify-between text-sm py-2.5">
            <span class=" w-40 inline-block font-normal">{{ trans('pages.products.price') }}</span>
            <b>{{ item.price|money }}</b>
        </div>
        <div class="flex justify-between  text-sm py-2.5">
            <span class="w-40 inline-block font-normal">{{ trans('pages.orders.total') }}</span>
            <b>
                {% if branch is not empty %}
                    {{ item.stock_total|money }}
                {% else %}
                    {{ item.total|money }}
                {% endif %}
            </b>
        </div>

        {% if item.options %}
            <h2 class="mt-5 mb-3.5 text-sm font-bold">{{ trans('pages.cart.item_options') }}</h2>
            <div class="flow-root rounded-md px-4 border border-gray-200 mb-2">
                <dl class="text-sm text-dark divide-y divide-border-color">
                    {% for option in item.options %}
                        <div class="py-2.5 center-between">
                            <dt class="mb-2 md:mb-0">
                                {{ option.name }}:
                            </dt>
                            <dd class="font-medium {{ option.is_image ? 'text-gray-900' : 'text-xs' }}">
                                {% if option.is_image %}
                                    <div class="flex space-s-2.5">
                                        <a href="{{ option.value }}" target="_blank">
                                            <img class="h-6 w-6 object-cover rounded-md"
                                                 src="{{ option.value ?: 'images/placeholder.png' | asset }}"
                                                 alt="{{ option.name }}"/>
                                        </a>
                                    </div>
                                {% elseif option.color %}
                                    <span title="{{option.value}}" class="inline-block h-6 w-6 ms-2 rounded-full shadow" style="background-color: {{ option.color }}" ></span>
                                {% else %}
                                    {{ option.value }}
                                {% endif %}
                            </dd>
                        </div>
                    {% endfor %}
                </dl>
            </div>
        {% endif %}

        {% if item.sub_products %}
            <h2 class="mb-3.5 text-sm font-bold">{{ trans('pages.orders.sub_products') }}</h2>
            <div class="flow-root rounded-md px-4 border border-gray-200">
                <dl class="text-sm text-dark divide-y divide-border-color">
                    {% for product in item.sub_products %}
                        <div class="py-3.5 md:flex items-center justify-between">
                            <dt class="mb-2 md:mb-0">
                                <a href="{{ product.url }}">
                                    {{ product.name }}
                                </a>
                            </dt>
                        </div>
                    {% endfor %}
                </dl>
            </div>
        {% endif %}

        {% if item.files %}
            <h2 class="mb-3.5 text-sm font-bold">{{ trans('pages.orders.files') }}</h2>
            <div class="flow-root rounded-md px-4 border border-gray-200">
                <dl class="text-sm text-dark divide-y divide-border-color">
                    {% for file in item.files %}
                        <div class="py-2.5 center-between">
                            <dt class="mb-2 md:mb-0">
                                {{ file.name }}
                            </dt>
                            <dd class="font-medium text-xs">
                                <a href="{{ file.url }}" target="_blank"
                                   class="font-bold text-gray-600 hover:text-black">
                                    <i class="sicon-download"></i> {{ trans('pages.thank_you.download') }}
                                </a>
                            </dd>
                        </div>
                    {% endfor %}
                </dl>
            </div>
        {% elseif item.codes %}
            <h2 class="mb-3.5 text-sm font-bold">{{ trans('pages.orders.codes') }}</h2>
            <div class="flow-root rounded-md px-4 border border-gray-200">
                <dl class="text-sm text-dark divide-y divide-border-color">
                    {% for code in item.codes %}
                        <div class="py-2.5 center-between">
                            <dt class="flex-center">
                                <i class="sicon-debit-card-back text-xl me-2 text-gray-500 inline-block -mt-1"></i>
                                <span>{{ code }}</span>
                            </dt>
                            <salla-button onclick="theme.copyToClipboard(event)" shape="link" data-content="{{ code }}">
                                <i class="copy-icon sicon-swap-stroke pointer-events-none"></i>
                                <span class="text-sm ms-2 pointer-events-non">{{ trans('common.elements.copy') }}</span>
                            </salla-button>
                        </div>
                    {% endfor %}
                </dl>
            </div>
        {% endif %}
        {% if item.note %}
            <p class="mt-3 text-sm text-gray-500">
                <span>{{ trans('common.elements.note') }} : </span>{{ item.note }}
            </p>
        {% endif %}
        {% if item.attachments %}
            <div class="flow-root rounded-md px-4 border border-gray-200">
                <dl class="text-sm text-dark divide-y divide-border-color">
                    {% for attachment in item.attachments %}
                        <div class="py-3.5 md:flex items-center justify-between">
                            <dt class="mb-2 md:mb-0">
                                {{ trans('pages.products.attachments') }}
                            </dt>
                            <dd class="font-medium {{ attachment.type == 'image' ? 'text-gray-900' : 'text-xs' }}">
                                <a href="{{ attachment.url }}">
                                    {% if attachment.type == 'image' %}
                                        <div class="flex space-s-2.5">
                                            <a href="{{ attachment.url }}" target="_blank">
                                                <img class="h-7 w-7 object-cover rounded-md"
                                                     src="{{ attachment.url }}"
                                                     alt="{{ item.name }}"/>
                                            </a>
                                        </div>
                                    {% else %}
                                        {{ trans('pages.orders.file_url') }}
                                    {% endif %}
                                </a>
                            </dd>
                        </div>
                    {% endfor %}
                </dl>
            </div>
        {% endif %}

        {% if item.rating %}
            <section class="border-t mt-10 pt-8">
                <p>{{ item.rating.content|raw }}</p>
                {% if item.rating.is_pending %}
                    <span>{{ trans('pages.rating.pending') }}</span>
                {% endif %}
                <salla-rating-stars size="small" value="{{item.rating.stars}}"></salla-rating-stars>
            </section>
        {% endif %}
    </div>
{% endfor %}