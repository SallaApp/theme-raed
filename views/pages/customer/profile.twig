{#
| Variable              | Type     | Description                   |
|-----------------------|----------|-------------------------------|
| page                  | object   |                               |
| page.title            | string   |                               |
| page.name             | string   |                               |
| customer              | Customer | TODO                          |
| customer.first_name   | string   |                               |
| customer.last_name    | string   |                               |
| customer.avatar       | string   |                               |
| customer.city         | ?string  |                               |
| customer.country      | ?string  |                               |
| customer.full_name    | string   | link:`first_name` `last_name` |
| customer.mobile       | string   |                               |
| customer.email        | string   |                               |
| customer.gender       | ?string  | 'male', 'female'              |
| customer.birthday     | ?data    |                               |
| customer.country_code | string   | Customer country code ex. SA  |
#}
{% extends "layouts.master" %}

{% block styles %}
    <link rel="stylesheet" href="{{ asset('dist/flatpickr.css') }}">
    <link rel="stylesheet" href="{{ asset('dist/filepond.css') }}">
{% endblock %}
{% block content %}
    {% include 'pages.partials.customer.breadcrumbs' %}

    <div class="container mb-8 sm:mb-24">
        <div class="flex flex-col lg:flex-row ">
            {% include 'pages.partials.customer.sidebar' %}
            <div class="main-content flex-1 pt-5 lg:pt-10" id="profile_info">
                <div class="lg:hidden">
                    <div class="text-center mb-6">
                        <div class=" h-24 w-24 m-auto">
                            <input type="file"
                                   class="filepond profile-img file-pond--circular"
                                   name="filepond"
                                   data-instantUpload="true"
                                   id="profile_img"
                                   data-default="{{ user.avatar }}"
                                   data-max-file-size="3MB"/>
                        </div>
                    </div>
                </div>
                <h1 class="font-bold text-lg mb-5 lg:mb-10">{{ trans('pages.profile.edit') }}</h1>
                <form class="form form--user-profile ajax"
                      method="POST"
                      novalidate
                      action="{{ link('profile') }}"
                      data-filter-before-submit="appendAvtar">
                    {{ csrf_field() }}
                    <div class="sm:flex w-full sm:space-s-8">
                        <div class="flex-1">
                            <label for="first-name" class="block text-sm font-medium text-gray-700">
                                <b class="block">{{ trans('pages.profile.first_name') }}</b>
                            </label>
                            <div class="mt-2.5 mb-5">
                                <input type="text" name="first_name" value="{{ customer.first_name }}"
                                       id="first-name" autocomplete="first_name" class="form-input">
                            </div>
                        </div>
                        <div class="flex-1">
                            <label for="last-name" class="block text-sm font-medium text-gray-700">
                                <b class="block">{{ trans('pages.profile.last_name') }}</b>
                            </label>
                            <div class="mt-2.5 mb-5">
                                <input type="text" name="last_name" value="{{ customer.last_name }}" id="last-name"
                                       autocomplete="last-name" class="form-input">
                            </div>
                        </div>
                    </div>

                    <div class="sm:flex w-full sm:space-s-8">
                        <div class="flex-1">
                            <label for="birthday" class="block text-sm font-medium text-gray-700">
                                <b class="block">{{ trans('pages.profile.birthday') }}</b>
                            </label>

                            <div class="mt-2.5 mb-5">
                                <input type="text" id="birthday" name="birthday" value="{{ customer.birthday }}"
                                       class="form-input date-element"
                                       placeholder="{{ trans('pages.profile.birthday_placeholder') }}">
                            </div>
                        </div>

                        <div class="flex-1">
                            <label for="gender" class="block text-sm font-medium text-gray-700">
                                <b class="block">{{ trans('pages.profile.gender') }}</b>
                            </label>
                            <div class="mt-2.5 mb-5">
                                <select class="form-input appearance-none" name="gender">
                                    <option placeholder
                                            value="">{{ trans('pages.profile.gender_placeholder') }}</option>
                                    <option value="male" {{ customer.gender=='male'?'selected':'' }}>
                                        {{ trans('pages.profile.male') }}
                                    </option>
                                    <option value="female" {{ customer.gender=='female'?'selected':'' }}>
                                        {{ trans('pages.profile.female') }}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="sm:flex w-full sm:space-s-8">
                        <div class="flex-1">
                            <label for="email" class="block text-sm font-medium text-gray-700">
                                <b class="block">{{ trans('common.elements.email') }}</b>
                            </label>
                            <div class="mt-2.5 mb-5">
                                <input type="email" name="email" value="{{ customer.email }}" id="email"
                                       class="form-input ">
                            </div>
                        </div>

                        <div class="flex-1">
                            <label for="international-mobile" class="block text-sm font-medium text-gray-700">
                                <b class="block">{{ trans('common.elements.mobile') }}</b>
                            </label>
                            <div class="mt-2.5 mb-5">
                                <input type="text" name="mobile" value="{{ customer.mobile }}"
                                       id="international-mobile" class="tel-input form-input"
                                       data-code="{{ customer.country_code }}" data-digits="true">

                                <input type="hidden" name="country_code" class="country_code"
                                       value="{{ customer.country_code }}">
                            </div>
                        </div>
                    </div>

                    <button id="update-profile-btn" class="btn btn-primary btn--has-loading w-full mt-6">
                        <span class="loader loader--small"></span>
                        <span class="btn__text">{{ trans('common.elements.save') }}</span>
                    </button>
                </form>
                <salla-verify></salla-verify>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script defser src="{{ asset('dist/filepond.js') }}"></script>
    <script defer src="{{ asset('dist/customer.js') }}"></script>
{% endblock %}
